AGGRESSIVE BUTTON STATE MACHINE TIMING ANALYSIS
================================================

CRITICAL TIMING DEPENDENCIES:

1. GPIO INTERRUPT LATENCY: 
   - Hardware: <1ms (BCM2712 GPIO controller)
   - Kernel: <5ms (Linux GPIO interrupt handler)
   - Python gpiozero: ~10-50ms (user space callback)
   
2. BUTTON HOLD VALIDATION:
   - Required: 500ms minimum hold time
   - Measurement: gpiozero internal timer
   - Failure mode: <500ms press = ignored (return to IDLE)

3. COOLDOWN CHECK TIMING:
   - File read: /home/zeldar/burningman/last_print.json
   - JSON parse: ~0.1ms
   - Timestamp comparison: <0.01ms
   - Critical threshold: 5.0 seconds

4. PRINT EXECUTION PIPELINE:
   - Subprocess spawn: ~20ms
   - Shell script launch: ~30ms  
   - USB device check (lsusb): ~40ms
   - CUPS job submission: ~30ms
   - ESC/POS formatting: <1ms
   - Total: ~130ms

5. CUPS PROCESSING:
   - Queue acceptance: immediate
   - Spool file creation: ~10ms
   - USB transmission: ~200-500ms (depends on content length)
   - Y812BT processing: ~100-300ms
   - Paper advance/cut: ~500ms

FAILURE MODE TIMING WINDOWS:
- Race condition window: 0-20ms (during JSON write)
- USB disconnect window: 0-40ms (during lsusb check)
- Process termination window: 0-130ms (during subprocess.run)
- Paper jam detection: 500-2000ms (thermal printer timeout)

OPTIMIZATION IMPACT:
- Current total: ~1000-1500ms (button press to paper output)
- Optimized potential: ~200-400ms (direct CUPS API)
- Performance gain: 3-5x faster execution

RESOURCE EXHAUSTION LIMITS:
- Thermal paper: ~200 prints/roll
- CUPS queue: ~1000 jobs before slowdown  
- Disk space: 20GB available (29% used)
- File descriptors: 1024 limit (65 currently used)

ATTACK SURFACE SUMMARY:
- JSON corruption probability: ~0.1% per power cycle
- GPIO false positive rate: <0.01% (with 500ms hold)
- CUPS overflow threshold: >100 jobs/minute
- System resource exhaustion: >10MB spool files